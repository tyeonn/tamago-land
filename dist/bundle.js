/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map */ \"./src/js/map.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./player */ \"./src/js/player.js\");\n\n\n\nconst canvas = document.getElementById(\"main-canvas\");\nconst ctx = canvas.getContext(\"2d\");\nconst canvasWidth = 800;\nconst canvasHeight = 600;\n\nwindow.requestAnimationFrame =\n  window.requestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  function(f) {\n    return setTimeout(f, 1000 / 60);\n  };\n\nconst map = new _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"](ctx, canvasWidth, canvasHeight);\nconst player = new _player__WEBPACK_IMPORTED_MODULE_1__[\"default\"](ctx, canvasWidth, canvasHeight, map);\n\ndocument.addEventListener(\"keydown\", player.keyDownHandler);\ndocument.addEventListener(\"keyup\", player.keyUpHandler);\n\nconst animate = () => {\n\n  ctx.clearRect(0,0,canvasWidth,canvasHeight);\n  map.render();\n  player.sprite.loop();\n  player.updatePos();\n  // player.sprite.update();\n  // player.sprite.render();\n  requestAnimationFrame(animate);\n};\nanimate();\n// ctx.beginPath();\n// ctx.fillStyle = \"black\";\n// ctx.rect(0, canvas.height / 5, 40, 15);\n// ctx.rect(0, (canvas.height * 2) / 5, 40, 15);\n// ctx.rect(0, (canvas.height * 3) / 5, 40, 15);\n// ctx.rect(0, (canvas.height * 4) / 5, 40, 15);\n// ctx.fill();\n// ctx.closePath();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanM/N2JhNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBd0I7QUFDTTs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsNENBQUc7QUFDbkIsbUJBQW1CLCtDQUFNOztBQUV6QjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvanMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFwIGZyb20gXCIuL21hcFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLWNhbnZhc1wiKTtcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5jb25zdCBjYW52YXNXaWR0aCA9IDgwMDtcbmNvbnN0IGNhbnZhc0hlaWdodCA9IDYwMDtcblxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICBmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZiwgMTAwMCAvIDYwKTtcbiAgfTtcblxuY29uc3QgbWFwID0gbmV3IE1hcChjdHgsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xuY29uc3QgcGxheWVyID0gbmV3IFBsYXllcihjdHgsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIG1hcCk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHBsYXllci5rZXlEb3duSGFuZGxlcik7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgcGxheWVyLmtleVVwSGFuZGxlcik7XG5cbmNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XG5cbiAgY3R4LmNsZWFyUmVjdCgwLDAsY2FudmFzV2lkdGgsY2FudmFzSGVpZ2h0KTtcbiAgbWFwLnJlbmRlcigpO1xuICBwbGF5ZXIuc3ByaXRlLmxvb3AoKTtcbiAgcGxheWVyLnVwZGF0ZVBvcygpO1xuICAvLyBwbGF5ZXIuc3ByaXRlLnVwZGF0ZSgpO1xuICAvLyBwbGF5ZXIuc3ByaXRlLnJlbmRlcigpO1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG59O1xuYW5pbWF0ZSgpO1xuLy8gY3R4LmJlZ2luUGF0aCgpO1xuLy8gY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbi8vIGN0eC5yZWN0KDAsIGNhbnZhcy5oZWlnaHQgLyA1LCA0MCwgMTUpO1xuLy8gY3R4LnJlY3QoMCwgKGNhbnZhcy5oZWlnaHQgKiAyKSAvIDUsIDQwLCAxNSk7XG4vLyBjdHgucmVjdCgwLCAoY2FudmFzLmhlaWdodCAqIDMpIC8gNSwgNDAsIDE1KTtcbi8vIGN0eC5yZWN0KDAsIChjYW52YXMuaGVpZ2h0ICogNCkgLyA1LCA0MCwgMTUpO1xuLy8gY3R4LmZpbGwoKTtcbi8vIGN0eC5jbG9zZVBhdGgoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/index.js\n");

/***/ }),

/***/ "./src/js/map.js":
/*!***********************!*\
  !*** ./src/js/map.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass Map {\n  constructor(ctx, canvasWidth, canvasHeight) {\n    this.ctx = ctx;\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.tile = new Image();\n    this.tile.src = \"./src/images/tile.png\";\n    this.tileWidth = 40;\n    this.tileHeight = 15;\n    this.ladder = new Image();\n    this.ladder.src = \"./src/images/ladder.png\";\n    this.ladderWidth = 40;\n    this.ladderHeight = 150;\n    this.ladders = [];\n    this.drawFloor = this.drawFloor.bind(this);\n    this.createFloor = this.createFloor.bind(this);\n    this.drawLadder = this.drawLadder.bind(this);\n    this.ladderRow = 4;\n    this.ladderCol = 20;\n    this.ladderPos = [[2, 0], [8, 1], [14, 2], [2, 3], [11, 3]];\n    this.floorLevelX = {\n      0: 600,\n      1: 465,\n      2: 345,\n      3: 225,\n      4: 105\n    };\n  }\n\n  render() {\n    this.drawFloor();\n    this.drawLadder();\n  }\n  drawFloor() {\n    // this.tile.onload = () =>\n    this.createFloor();\n  }\n  createFloor() {\n    const missingTile = [\n      [5, 0],\n      [12, 0],\n      [10, 1],\n      [4, 2],\n      [5, 3],\n      [6, 3],\n      [7, 3]\n    ];\n    const floorRow = 4;\n    const floorCol = 20;\n    this.floor = [];\n    for (let col = 0; col < floorCol; col++) {\n      this.floor[col] = [];\n      for (let row = 0; row < floorRow; row++) {\n        this.floor[col][row] = { x: 0, y: 0, missing: false };\n      }\n    }\n    missingTile.forEach(\n      function(tile) {\n        this.floor[tile[0]][tile[1]].missing = true;\n      }.bind(this)\n    );\n\n    for (let col = 0; col < floorCol; col++) {\n      for (let row = 0; row < floorRow; row++) {\n        let tileX = col * this.tileWidth;\n        let tileY = (row + 1) * (this.canvasHeight / 5) - this.tileHeight;\n        this.floor[col][row].x = tileX;\n        this.floor[col][row].y = tileY;\n        if (!this.floor[col][row].missing) {\n          this.ctx.drawImage(this.tile, tileX, tileY);\n        }\n      }\n    }\n  }\n  drawLadder() {\n    this.ladderPos = [[2, 0], [8, 1], [14, 2], [2, 3], [11, 3]];\n    // this.ladder.onload = () => {\n    this.ladderRow = 4;\n    this.ladderCol = 20;\n    // this.ladders = [];\n    for (let col = 0; col < this.ladderCol; col++) {\n      this.ladders[col] = [];\n      for (let row = 0; row < this.ladderRow; row++) {\n        this.ladders[col][row] = { x: 0, y: 0, missing: true };\n      }\n    }\n    this.ladderPos.forEach(\n      function(lad) {\n        this.ladders[lad[0]][lad[1]].missing = false;\n      }.bind(this)\n    );\n    for (let col = 0; col < this.ladderCol; col++) {\n      for (let row = 0; row < this.ladderRow; row++) {\n        let ladX = col * this.ladderWidth;\n        let ladY;\n        if (row != 3) {\n          ladY = (row + 1) * (this.canvasHeight / 5) - 45;\n        } else {\n          ladY = (row + 1) * (this.canvasHeight / 5) - 30;\n        }\n        this.ladders[col][row].x = ladX;\n        this.ladders[col][row].y = ladY;\n        if (!this.ladders[col][row].missing) {\n          this.ctx.drawImage(this.ladder, ladX, ladY);\n        }\n      }\n    }\n    // };\n  }\n\n  //Filter ladders that are not missing\n  displayedLadders() {\n    let lads= [];\n    for (let col = 0; col < this.ladderCol; col++) {\n      for (let row = 0; row < this.ladderRow; row++) {\n        if(!this.ladders[col][row].missing){\n          lads.push(this.ladders[col][row]);\n        }\n      }\n    }\n    return lads;\n  }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Map);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFwLmpzPzI2NzkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0JBQWdCO0FBQ3JDO0FBQ0EsdUJBQXVCLGdCQUFnQjtBQUN2QyxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxxQkFBcUIsZ0JBQWdCO0FBQ3JDLHVCQUF1QixnQkFBZ0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0JBQXNCO0FBQzNDO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QyxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0MsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0MsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2Usa0VBQUcsRUFBQyIsImZpbGUiOiIuL3NyYy9qcy9tYXAuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNYXAge1xuICBjb25zdHJ1Y3RvcihjdHgsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpIHtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLmNhbnZhc1dpZHRoID0gY2FudmFzV2lkdGg7XG4gICAgdGhpcy5jYW52YXNIZWlnaHQgPSBjYW52YXNIZWlnaHQ7XG4gICAgdGhpcy50aWxlID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy50aWxlLnNyYyA9IFwiLi9zcmMvaW1hZ2VzL3RpbGUucG5nXCI7XG4gICAgdGhpcy50aWxlV2lkdGggPSA0MDtcbiAgICB0aGlzLnRpbGVIZWlnaHQgPSAxNTtcbiAgICB0aGlzLmxhZGRlciA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMubGFkZGVyLnNyYyA9IFwiLi9zcmMvaW1hZ2VzL2xhZGRlci5wbmdcIjtcbiAgICB0aGlzLmxhZGRlcldpZHRoID0gNDA7XG4gICAgdGhpcy5sYWRkZXJIZWlnaHQgPSAxNTA7XG4gICAgdGhpcy5sYWRkZXJzID0gW107XG4gICAgdGhpcy5kcmF3Rmxvb3IgPSB0aGlzLmRyYXdGbG9vci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlRmxvb3IgPSB0aGlzLmNyZWF0ZUZsb29yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kcmF3TGFkZGVyID0gdGhpcy5kcmF3TGFkZGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5sYWRkZXJSb3cgPSA0O1xuICAgIHRoaXMubGFkZGVyQ29sID0gMjA7XG4gICAgdGhpcy5sYWRkZXJQb3MgPSBbWzIsIDBdLCBbOCwgMV0sIFsxNCwgMl0sIFsyLCAzXSwgWzExLCAzXV07XG4gICAgdGhpcy5mbG9vckxldmVsWCA9IHtcbiAgICAgIDA6IDYwMCxcbiAgICAgIDE6IDQ2NSxcbiAgICAgIDI6IDM0NSxcbiAgICAgIDM6IDIyNSxcbiAgICAgIDQ6IDEwNVxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5kcmF3Rmxvb3IoKTtcbiAgICB0aGlzLmRyYXdMYWRkZXIoKTtcbiAgfVxuICBkcmF3Rmxvb3IoKSB7XG4gICAgLy8gdGhpcy50aWxlLm9ubG9hZCA9ICgpID0+XG4gICAgdGhpcy5jcmVhdGVGbG9vcigpO1xuICB9XG4gIGNyZWF0ZUZsb29yKCkge1xuICAgIGNvbnN0IG1pc3NpbmdUaWxlID0gW1xuICAgICAgWzUsIDBdLFxuICAgICAgWzEyLCAwXSxcbiAgICAgIFsxMCwgMV0sXG4gICAgICBbNCwgMl0sXG4gICAgICBbNSwgM10sXG4gICAgICBbNiwgM10sXG4gICAgICBbNywgM11cbiAgICBdO1xuICAgIGNvbnN0IGZsb29yUm93ID0gNDtcbiAgICBjb25zdCBmbG9vckNvbCA9IDIwO1xuICAgIHRoaXMuZmxvb3IgPSBbXTtcbiAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBmbG9vckNvbDsgY29sKyspIHtcbiAgICAgIHRoaXMuZmxvb3JbY29sXSA9IFtdO1xuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgZmxvb3JSb3c7IHJvdysrKSB7XG4gICAgICAgIHRoaXMuZmxvb3JbY29sXVtyb3ddID0geyB4OiAwLCB5OiAwLCBtaXNzaW5nOiBmYWxzZSB9O1xuICAgICAgfVxuICAgIH1cbiAgICBtaXNzaW5nVGlsZS5mb3JFYWNoKFxuICAgICAgZnVuY3Rpb24odGlsZSkge1xuICAgICAgICB0aGlzLmZsb29yW3RpbGVbMF1dW3RpbGVbMV1dLm1pc3NpbmcgPSB0cnVlO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgKTtcblxuICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IGZsb29yQ29sOyBjb2wrKykge1xuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgZmxvb3JSb3c7IHJvdysrKSB7XG4gICAgICAgIGxldCB0aWxlWCA9IGNvbCAqIHRoaXMudGlsZVdpZHRoO1xuICAgICAgICBsZXQgdGlsZVkgPSAocm93ICsgMSkgKiAodGhpcy5jYW52YXNIZWlnaHQgLyA1KSAtIHRoaXMudGlsZUhlaWdodDtcbiAgICAgICAgdGhpcy5mbG9vcltjb2xdW3Jvd10ueCA9IHRpbGVYO1xuICAgICAgICB0aGlzLmZsb29yW2NvbF1bcm93XS55ID0gdGlsZVk7XG4gICAgICAgIGlmICghdGhpcy5mbG9vcltjb2xdW3Jvd10ubWlzc2luZykge1xuICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLnRpbGUsIHRpbGVYLCB0aWxlWSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZHJhd0xhZGRlcigpIHtcbiAgICB0aGlzLmxhZGRlclBvcyA9IFtbMiwgMF0sIFs4LCAxXSwgWzE0LCAyXSwgWzIsIDNdLCBbMTEsIDNdXTtcbiAgICAvLyB0aGlzLmxhZGRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgdGhpcy5sYWRkZXJSb3cgPSA0O1xuICAgIHRoaXMubGFkZGVyQ29sID0gMjA7XG4gICAgLy8gdGhpcy5sYWRkZXJzID0gW107XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgdGhpcy5sYWRkZXJDb2w7IGNvbCsrKSB7XG4gICAgICB0aGlzLmxhZGRlcnNbY29sXSA9IFtdO1xuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5sYWRkZXJSb3c7IHJvdysrKSB7XG4gICAgICAgIHRoaXMubGFkZGVyc1tjb2xdW3Jvd10gPSB7IHg6IDAsIHk6IDAsIG1pc3Npbmc6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5sYWRkZXJQb3MuZm9yRWFjaChcbiAgICAgIGZ1bmN0aW9uKGxhZCkge1xuICAgICAgICB0aGlzLmxhZGRlcnNbbGFkWzBdXVtsYWRbMV1dLm1pc3NpbmcgPSBmYWxzZTtcbiAgICAgIH0uYmluZCh0aGlzKVxuICAgICk7XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgdGhpcy5sYWRkZXJDb2w7IGNvbCsrKSB7XG4gICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmxhZGRlclJvdzsgcm93KyspIHtcbiAgICAgICAgbGV0IGxhZFggPSBjb2wgKiB0aGlzLmxhZGRlcldpZHRoO1xuICAgICAgICBsZXQgbGFkWTtcbiAgICAgICAgaWYgKHJvdyAhPSAzKSB7XG4gICAgICAgICAgbGFkWSA9IChyb3cgKyAxKSAqICh0aGlzLmNhbnZhc0hlaWdodCAvIDUpIC0gNDU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFkWSA9IChyb3cgKyAxKSAqICh0aGlzLmNhbnZhc0hlaWdodCAvIDUpIC0gMzA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYWRkZXJzW2NvbF1bcm93XS54ID0gbGFkWDtcbiAgICAgICAgdGhpcy5sYWRkZXJzW2NvbF1bcm93XS55ID0gbGFkWTtcbiAgICAgICAgaWYgKCF0aGlzLmxhZGRlcnNbY29sXVtyb3ddLm1pc3NpbmcpIHtcbiAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5sYWRkZXIsIGxhZFgsIGxhZFkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIH07XG4gIH1cblxuICAvL0ZpbHRlciBsYWRkZXJzIHRoYXQgYXJlIG5vdCBtaXNzaW5nXG4gIGRpc3BsYXllZExhZGRlcnMoKSB7XG4gICAgbGV0IGxhZHM9IFtdO1xuICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IHRoaXMubGFkZGVyQ29sOyBjb2wrKykge1xuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5sYWRkZXJSb3c7IHJvdysrKSB7XG4gICAgICAgIGlmKCF0aGlzLmxhZGRlcnNbY29sXVtyb3ddLm1pc3Npbmcpe1xuICAgICAgICAgIGxhZHMucHVzaCh0aGlzLmxhZGRlcnNbY29sXVtyb3ddKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGFkcztcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgTWFwO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/map.js\n");

/***/ }),

/***/ "./src/js/player.js":
/*!**************************!*\
  !*** ./src/js/player.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sprite */ \"./src/js/sprite.js\");\n\n\nclass Player {\n  constructor(ctx, canvasWidth, canvasHeight, map) {\n    this.map = map;\n    this.ladders = [];\n    this.floorLevel = 0;\n    this.ctx = ctx;\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.standingImg = new Image();\n    this.standingImg.src = \"./src/images/penguin_standing.png\";\n    this.standingImgRight = new Image();\n    this.standingImgRight.src = \"./src/images/penguin_standing_right.png\";\n    this.climbingImg = new Image();\n    this.climbingImg.src = \"./src/images/penguin_climb.png\";\n    this.feintLeftImg = new Image();\n    this.feintLeftImg.src = \"./src/images/penguin_feint_left.png\";\n    this.feintRightImg = new Image();\n    this.feintRightImg.src = \"./src/images/penguin_feint_right.png\";\n    this.walkingLeftImg = new Image();\n    this.walkingLeftImg.src = \"./src/images/penguin_walk_left.png\";\n    this.walkingRightImg = new Image();\n    this.walkingRightImg.src = \"./src/images/penguin_walk_right.png\";\n\n    this.sprite = Object(_sprite__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n      context: this.ctx,\n      canvasWidth: this.canvasWidth,\n      canvasHeight: this.canvasHeight,\n      height: 54,\n      width: 240,\n      image: this.standingImg,\n      dx: this.canvasWidth - 80,\n      dy: this.canvasHeight - 48,\n      ticksPerFrame: 5,\n      numberOfFrames: 4,\n      standing: true,\n      frameIndex: 0\n    });\n\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.keyUpHandler = this.keyUpHandler.bind(this);\n\n    this.rightPress = false;\n    this.leftPress = false;\n    this.upPress = false;\n    this.downPress = false;\n    this.jumpPress = false;\n    this.jumpLimit = 75;\n    //Prevent jumping while jumping\n    this.isJumping = false;\n    //Prevent L, R while climbing\n    this.isClimbing = false;\n\n    this.jump = this.jump.bind(this);\n    this.stand = this.stand.bind(this);\n    this.checkLadder = this.checkLadder.bind(this);\n    this.keys = [];\n\n    // this.moveLeft = this.moveLeft.bind(this);\n    // this.moveRight = this.moveRight.bind(this);\n    // this.goDown = false;\n    // this.velX = 0;\n  }\n\n  keyDownHandler(e) {\n    // debugger\n    if (e.key == \"Right\" || e.key == \"ArrowRight\") {\n      this.rightPress = true;\n    }\n    if (e.key == \"Left\" || e.key == \"ArrowLeft\") {\n      this.leftPress = true;\n    }\n    if (e.key == \"Down\" || e.key == \"ArrowDown\") {\n      this.downPress = true;\n      this.moveDown(e);\n    }\n    if (e.key == \"Up\" || e.key == \"ArrowUp\") {\n      this.upPress = true;\n    }\n    if (e.keyCode == 32) {\n      this.jumpPress = true;\n      this.jump(e);\n    }\n  }\n\n  keyUpHandler(e) {\n    if (e.key == \"Right\" || e.key == \"ArrowRight\") {\n      this.rightPress = false;\n      this.stand(\"right\");\n    }\n    if (e.key == \"Left\" || e.key == \"ArrowLeft\") {\n      this.leftPress = false;\n      this.stand(\"left\");\n    }\n    if (e.key == \"Down\" || e.key == \"ArrowDown\") {\n      this.downPress = false;\n    }\n    if (e.key == \"Up\" || e.key == \"ArrowUp\") {\n      this.upPress = false;\n    }\n    if (e.keyCode == 32) {\n      this.jumpPress = false;\n    }\n  }\n  updatePos() {\n    if (!this.isClimbing) {\n    //RIGHT\n      if (this.rightPress && this.sprite.dx < this.canvasWidth - 60) {\n        this.sprite.dx += 4;\n        this.sprite.image = this.walkingRightImg;\n        this.sprite.width = 600;\n        this.sprite.numberOfFrames = 10;\n        this.sprite.standing = false;\n      }\n    //LEFT\n      if (this.leftPress && this.sprite.dx > 0) {\n        this.sprite.dx -= 4;\n        this.sprite.image = this.walkingLeftImg;\n        this.sprite.width = 600;\n        this.sprite.numberOfFrames = 10;\n        this.sprite.standing = false;\n      }\n    }\n    //UP\n    if (this.upPress) {\n      console.log(this.isClimbing);\n      let currLadder = this.checkLadder();\n      // debugger;\n      let nextFloorY = this.map.floorLevelX[this.floorLevel + 1];\n      let playerLowerY = this.sprite.dy + 50;\n      let playerUpperY = this.sprite.dy;\n      if (currLadder && playerLowerY > nextFloorY ) {\n        this.isClimbing = true;\n        this.sprite.dy -= 4;\n        this.sprite.image = this.climbingImg;\n        this.sprite.width = 300;\n        this.sprite.numberOfFrames = 5;\n        this.sprite.standing = false;\n        console.log(playerLowerY +\" \" + nextFloorY);\n      } else if(playerUpperY<= nextFloorY + 50) {\n        // this.sprite.dy = this.map.floorLevelX[this.floorLevel + 1] + 50;\n        debugger\n        this.isClimbing = false;\n        this.sprite.dy = nextFloorY - 48;\n        console.log(this.sprite.dy);\n        console.log(nextFloorY);\n        console.log(nextFloorY - 48);\n        // this.stand(\"left\");\n        this.floorLevel++;\n      }\n    }\n    // DOWN\n  }\n\n  checkLadder() {\n    this.ladders = this.map.displayedLadders();\n    let playerCenter = this.sprite.dx + 30;\n    let nextFloorY = this.map.floorLevelX[this.floorLevel + 1];\n\n    let playerUpperY = this.sprite.dy;\n    let playerLowerY = this.sprite.dy + 50;\n    for (let lad of this.ladders) {\n      // console.log(\"playerCenter\" +playerCenter);\n      // console.log(\"lad.x\" + lad.x);\n      // console.log(\"lad.x+40\" + lad.x+40);\n      // console.log(\"playerUpperY\" + playerUpperY);\n      // console.log(\"playerlowery\" + playerLowerY);\n      // console.log(\"lad.y\" + lad.y);\n      // console.log(\"lad.y\" + lad.y+150);\n      // debugger;\n      if (\n        playerCenter >= lad.x &&\n        playerCenter <= lad.x + 40 &&\n        playerUpperY >= lad.y &&\n        playerLowerY >= lad.y  &&\n        playerLowerY <= lad.y + 160\n      ) {\n        // debugger;\n        // this.isClimbing = true;\n        return lad;\n      }\n    }\n    return null;\n    // return this.isClimbing ? true : false;\n  }\n  stand(side) {\n    this.sprite.image =\n      side === \"left\" ? this.standingImg : this.standingImgRight;\n    this.sprite.width = 240;\n    this.sprite.standing = true;\n    this.sprite.frameIndex = 0;\n    this.sprite.numberOfFrames = 4;\n  }\n\n  // moveUp(e) {\n  //   // this.ladders = this.map.displayedLadders();\n  //   // console.log(this.ladders);\n  // }\n\n  moveDown(e) {}\n\n  jump(e) {\n    if (this.jumpPress && !this.isJumping) {\n      this.isJumping = true;\n\n      let initialY = this.sprite.dy;\n      let velX;\n      console.log(this.rightPress);\n      if (this.rightPress) {\n        velX = 2;\n      } else if (this.leftPress) {\n        velX = -2;\n      } else {\n        velX = 0;\n      }\n      let velY = -12;\n      let gravity = 0.9;\n      let jumping = setInterval(() => {\n        velY += gravity;\n        this.sprite.dy += velY;\n        if (this.sprite.dx < 0 || this.sprite.dx > this.canvasWidth - 60) {\n          this.sprite.dx += -velX;\n        } else {\n          this.sprite.dx += velX;\n        }\n        // this.sprite.dx += velX;\n        if (this.sprite.dy > initialY) {\n          velY = 0;\n          this.sprite.dy = initialY;\n          this.isJumping = false;\n          clearInterval(jumping);\n        }\n      }, 10);\n    }\n  }\n  // let jumping = setInterval(() => {\n  //   if (!this.goDown && this.sprite.dy > initialY - this.jumpLimit) {\n  //     if (this.sprite.dx < 0 || this.sprite.dx > this.canvasWidth - 60) {\n  //       this.sprite.dx += -velX;\n  //     } else {\n  //       this.sprite.dx += velX;\n  //     }\n  //     this.sprite.dy -= 4;\n  //   } else if (this.sprite.dy < initialY) {\n  //     this.goDown = true;\n  //     if (this.sprite.dx < 0 || this.sprite.dx > this.canvasWidth - 60) {\n  //       this.sprite.dx += -velX;\n  //     } else {\n  //       this.sprite.dx += velX;\n  //     }\n  //     this.sprite.dy += 4;\n  //   } else {\n  //     this.isJumping = false;\n  //     clearInterval(jumping);\n  //     this.goDown = false;\n  //   }\n  // }, 33);\n  // moveLeft() {\n  //   if (!this.leftPress) {\n  //     this.stand(\"left\");\n  //   } else if (this.leftPress && this.sprite.dx > 0) {\n  //     this.sprite.dx -= 7;\n  //     this.sprite.image = this.walkingLeftImg;\n  //     this.sprite.width = 600;\n  //     this.sprite.numberOfFrames = 10;\n  //     this.sprite.standing = false;\n  //   }\n  // }\n  // moveRight() {\n  //   // let right;\n  //   // right = setInterval(() => {\n  //   //   if(this.keys.ArrowRight && !this.rightPress){\n  //   //     this.rightPress = true;\n  //   //     if (this.sprite.dx < this.canvasWidth - 60) {\n  //   //       this.sprite.dx += 7;\n  //   //       this.sprite.image = this.walkingRightImg;\n  //   //       this.sprite.width = 600;\n  //   //       this.sprite.numberOfFrames = 10;\n  //   //       this.sprite.standing = false;\n  //   //     }\n  //   //   }else{\n  //   //     this.rightPress = false;\n  //   //     clearInterval(right);\n  //   //   }\n  //   //   },10);\n  //   if (!this.rightPress) {\n  //     this.stand(\"right\");\n  //   } else if (this.rightPress && this.sprite.dx < this.canvasWidth - 60) {\n  //     this.sprite.dx += 7;\n  //     this.sprite.image = this.walkingRightImg;\n  //     this.sprite.width = 600;\n  //     this.sprite.numberOfFrames = 10;\n  //     this.sprite.standing = false;\n  //   }\n  // }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Player);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGxheWVyLmpzP2VlMjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUE4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLHVEQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlLHFFQUFNLEVBQUMiLCJmaWxlIjoiLi9zcmMvanMvcGxheWVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNwcml0ZSBmcm9tIFwiLi9zcHJpdGVcIjtcblxuY2xhc3MgUGxheWVyIHtcbiAgY29uc3RydWN0b3IoY3R4LCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0LCBtYXApIHtcbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB0aGlzLmxhZGRlcnMgPSBbXTtcbiAgICB0aGlzLmZsb29yTGV2ZWwgPSAwO1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMuY2FudmFzV2lkdGggPSBjYW52YXNXaWR0aDtcbiAgICB0aGlzLmNhbnZhc0hlaWdodCA9IGNhbnZhc0hlaWdodDtcbiAgICB0aGlzLnN0YW5kaW5nSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5zdGFuZGluZ0ltZy5zcmMgPSBcIi4vc3JjL2ltYWdlcy9wZW5ndWluX3N0YW5kaW5nLnBuZ1wiO1xuICAgIHRoaXMuc3RhbmRpbmdJbWdSaWdodCA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuc3RhbmRpbmdJbWdSaWdodC5zcmMgPSBcIi4vc3JjL2ltYWdlcy9wZW5ndWluX3N0YW5kaW5nX3JpZ2h0LnBuZ1wiO1xuICAgIHRoaXMuY2xpbWJpbmdJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmNsaW1iaW5nSW1nLnNyYyA9IFwiLi9zcmMvaW1hZ2VzL3Blbmd1aW5fY2xpbWIucG5nXCI7XG4gICAgdGhpcy5mZWludExlZnRJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmZlaW50TGVmdEltZy5zcmMgPSBcIi4vc3JjL2ltYWdlcy9wZW5ndWluX2ZlaW50X2xlZnQucG5nXCI7XG4gICAgdGhpcy5mZWludFJpZ2h0SW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5mZWludFJpZ2h0SW1nLnNyYyA9IFwiLi9zcmMvaW1hZ2VzL3Blbmd1aW5fZmVpbnRfcmlnaHQucG5nXCI7XG4gICAgdGhpcy53YWxraW5nTGVmdEltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMud2Fsa2luZ0xlZnRJbWcuc3JjID0gXCIuL3NyYy9pbWFnZXMvcGVuZ3Vpbl93YWxrX2xlZnQucG5nXCI7XG4gICAgdGhpcy53YWxraW5nUmlnaHRJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLndhbGtpbmdSaWdodEltZy5zcmMgPSBcIi4vc3JjL2ltYWdlcy9wZW5ndWluX3dhbGtfcmlnaHQucG5nXCI7XG5cbiAgICB0aGlzLnNwcml0ZSA9IHNwcml0ZSh7XG4gICAgICBjb250ZXh0OiB0aGlzLmN0eCxcbiAgICAgIGNhbnZhc1dpZHRoOiB0aGlzLmNhbnZhc1dpZHRoLFxuICAgICAgY2FudmFzSGVpZ2h0OiB0aGlzLmNhbnZhc0hlaWdodCxcbiAgICAgIGhlaWdodDogNTQsXG4gICAgICB3aWR0aDogMjQwLFxuICAgICAgaW1hZ2U6IHRoaXMuc3RhbmRpbmdJbWcsXG4gICAgICBkeDogdGhpcy5jYW52YXNXaWR0aCAtIDgwLFxuICAgICAgZHk6IHRoaXMuY2FudmFzSGVpZ2h0IC0gNDgsXG4gICAgICB0aWNrc1BlckZyYW1lOiA1LFxuICAgICAgbnVtYmVyT2ZGcmFtZXM6IDQsXG4gICAgICBzdGFuZGluZzogdHJ1ZSxcbiAgICAgIGZyYW1lSW5kZXg6IDBcbiAgICB9KTtcblxuICAgIHRoaXMua2V5RG93bkhhbmRsZXIgPSB0aGlzLmtleURvd25IYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5rZXlVcEhhbmRsZXIgPSB0aGlzLmtleVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5yaWdodFByZXNzID0gZmFsc2U7XG4gICAgdGhpcy5sZWZ0UHJlc3MgPSBmYWxzZTtcbiAgICB0aGlzLnVwUHJlc3MgPSBmYWxzZTtcbiAgICB0aGlzLmRvd25QcmVzcyA9IGZhbHNlO1xuICAgIHRoaXMuanVtcFByZXNzID0gZmFsc2U7XG4gICAgdGhpcy5qdW1wTGltaXQgPSA3NTtcbiAgICAvL1ByZXZlbnQganVtcGluZyB3aGlsZSBqdW1waW5nXG4gICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcbiAgICAvL1ByZXZlbnQgTCwgUiB3aGlsZSBjbGltYmluZ1xuICAgIHRoaXMuaXNDbGltYmluZyA9IGZhbHNlO1xuXG4gICAgdGhpcy5qdW1wID0gdGhpcy5qdW1wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFuZCA9IHRoaXMuc3RhbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNoZWNrTGFkZGVyID0gdGhpcy5jaGVja0xhZGRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMua2V5cyA9IFtdO1xuXG4gICAgLy8gdGhpcy5tb3ZlTGVmdCA9IHRoaXMubW92ZUxlZnQuYmluZCh0aGlzKTtcbiAgICAvLyB0aGlzLm1vdmVSaWdodCA9IHRoaXMubW92ZVJpZ2h0LmJpbmQodGhpcyk7XG4gICAgLy8gdGhpcy5nb0Rvd24gPSBmYWxzZTtcbiAgICAvLyB0aGlzLnZlbFggPSAwO1xuICB9XG5cbiAga2V5RG93bkhhbmRsZXIoZSkge1xuICAgIC8vIGRlYnVnZ2VyXG4gICAgaWYgKGUua2V5ID09IFwiUmlnaHRcIiB8fCBlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgdGhpcy5yaWdodFByZXNzID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGUua2V5ID09IFwiTGVmdFwiIHx8IGUua2V5ID09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgIHRoaXMubGVmdFByZXNzID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGUua2V5ID09IFwiRG93blwiIHx8IGUua2V5ID09IFwiQXJyb3dEb3duXCIpIHtcbiAgICAgIHRoaXMuZG93blByZXNzID0gdHJ1ZTtcbiAgICAgIHRoaXMubW92ZURvd24oZSk7XG4gICAgfVxuICAgIGlmIChlLmtleSA9PSBcIlVwXCIgfHwgZS5rZXkgPT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgIHRoaXMudXBQcmVzcyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChlLmtleUNvZGUgPT0gMzIpIHtcbiAgICAgIHRoaXMuanVtcFByZXNzID0gdHJ1ZTtcbiAgICAgIHRoaXMuanVtcChlKTtcbiAgICB9XG4gIH1cblxuICBrZXlVcEhhbmRsZXIoZSkge1xuICAgIGlmIChlLmtleSA9PSBcIlJpZ2h0XCIgfHwgZS5rZXkgPT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgIHRoaXMucmlnaHRQcmVzcyA9IGZhbHNlO1xuICAgICAgdGhpcy5zdGFuZChcInJpZ2h0XCIpO1xuICAgIH1cbiAgICBpZiAoZS5rZXkgPT0gXCJMZWZ0XCIgfHwgZS5rZXkgPT0gXCJBcnJvd0xlZnRcIikge1xuICAgICAgdGhpcy5sZWZ0UHJlc3MgPSBmYWxzZTtcbiAgICAgIHRoaXMuc3RhbmQoXCJsZWZ0XCIpO1xuICAgIH1cbiAgICBpZiAoZS5rZXkgPT0gXCJEb3duXCIgfHwgZS5rZXkgPT0gXCJBcnJvd0Rvd25cIikge1xuICAgICAgdGhpcy5kb3duUHJlc3MgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGUua2V5ID09IFwiVXBcIiB8fCBlLmtleSA9PSBcIkFycm93VXBcIikge1xuICAgICAgdGhpcy51cFByZXNzID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlLmtleUNvZGUgPT0gMzIpIHtcbiAgICAgIHRoaXMuanVtcFByZXNzID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHVwZGF0ZVBvcygpIHtcbiAgICBpZiAoIXRoaXMuaXNDbGltYmluZykge1xuICAgIC8vUklHSFRcbiAgICAgIGlmICh0aGlzLnJpZ2h0UHJlc3MgJiYgdGhpcy5zcHJpdGUuZHggPCB0aGlzLmNhbnZhc1dpZHRoIC0gNjApIHtcbiAgICAgICAgdGhpcy5zcHJpdGUuZHggKz0gNDtcbiAgICAgICAgdGhpcy5zcHJpdGUuaW1hZ2UgPSB0aGlzLndhbGtpbmdSaWdodEltZztcbiAgICAgICAgdGhpcy5zcHJpdGUud2lkdGggPSA2MDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLm51bWJlck9mRnJhbWVzID0gMTA7XG4gICAgICAgIHRoaXMuc3ByaXRlLnN0YW5kaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgLy9MRUZUXG4gICAgICBpZiAodGhpcy5sZWZ0UHJlc3MgJiYgdGhpcy5zcHJpdGUuZHggPiAwKSB7XG4gICAgICAgIHRoaXMuc3ByaXRlLmR4IC09IDQ7XG4gICAgICAgIHRoaXMuc3ByaXRlLmltYWdlID0gdGhpcy53YWxraW5nTGVmdEltZztcbiAgICAgICAgdGhpcy5zcHJpdGUud2lkdGggPSA2MDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLm51bWJlck9mRnJhbWVzID0gMTA7XG4gICAgICAgIHRoaXMuc3ByaXRlLnN0YW5kaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vVVBcbiAgICBpZiAodGhpcy51cFByZXNzKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmlzQ2xpbWJpbmcpO1xuICAgICAgbGV0IGN1cnJMYWRkZXIgPSB0aGlzLmNoZWNrTGFkZGVyKCk7XG4gICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgIGxldCBuZXh0Rmxvb3JZID0gdGhpcy5tYXAuZmxvb3JMZXZlbFhbdGhpcy5mbG9vckxldmVsICsgMV07XG4gICAgICBsZXQgcGxheWVyTG93ZXJZID0gdGhpcy5zcHJpdGUuZHkgKyA1MDtcbiAgICAgIGxldCBwbGF5ZXJVcHBlclkgPSB0aGlzLnNwcml0ZS5keTtcbiAgICAgIGlmIChjdXJyTGFkZGVyICYmIHBsYXllckxvd2VyWSA+IG5leHRGbG9vclkgKSB7XG4gICAgICAgIHRoaXMuaXNDbGltYmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3ByaXRlLmR5IC09IDQ7XG4gICAgICAgIHRoaXMuc3ByaXRlLmltYWdlID0gdGhpcy5jbGltYmluZ0ltZztcbiAgICAgICAgdGhpcy5zcHJpdGUud2lkdGggPSAzMDA7XG4gICAgICAgIHRoaXMuc3ByaXRlLm51bWJlck9mRnJhbWVzID0gNTtcbiAgICAgICAgdGhpcy5zcHJpdGUuc3RhbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyTG93ZXJZICtcIiBcIiArIG5leHRGbG9vclkpO1xuICAgICAgfSBlbHNlIGlmKHBsYXllclVwcGVyWTw9IG5leHRGbG9vclkgKyA1MCkge1xuICAgICAgICAvLyB0aGlzLnNwcml0ZS5keSA9IHRoaXMubWFwLmZsb29yTGV2ZWxYW3RoaXMuZmxvb3JMZXZlbCArIDFdICsgNTA7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIHRoaXMuaXNDbGltYmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNwcml0ZS5keSA9IG5leHRGbG9vclkgLSA0ODtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zcHJpdGUuZHkpO1xuICAgICAgICBjb25zb2xlLmxvZyhuZXh0Rmxvb3JZKTtcbiAgICAgICAgY29uc29sZS5sb2cobmV4dEZsb29yWSAtIDQ4KTtcbiAgICAgICAgLy8gdGhpcy5zdGFuZChcImxlZnRcIik7XG4gICAgICAgIHRoaXMuZmxvb3JMZXZlbCsrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBET1dOXG4gIH1cblxuICBjaGVja0xhZGRlcigpIHtcbiAgICB0aGlzLmxhZGRlcnMgPSB0aGlzLm1hcC5kaXNwbGF5ZWRMYWRkZXJzKCk7XG4gICAgbGV0IHBsYXllckNlbnRlciA9IHRoaXMuc3ByaXRlLmR4ICsgMzA7XG4gICAgbGV0IG5leHRGbG9vclkgPSB0aGlzLm1hcC5mbG9vckxldmVsWFt0aGlzLmZsb29yTGV2ZWwgKyAxXTtcblxuICAgIGxldCBwbGF5ZXJVcHBlclkgPSB0aGlzLnNwcml0ZS5keTtcbiAgICBsZXQgcGxheWVyTG93ZXJZID0gdGhpcy5zcHJpdGUuZHkgKyA1MDtcbiAgICBmb3IgKGxldCBsYWQgb2YgdGhpcy5sYWRkZXJzKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcInBsYXllckNlbnRlclwiICtwbGF5ZXJDZW50ZXIpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJsYWQueFwiICsgbGFkLngpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJsYWQueCs0MFwiICsgbGFkLngrNDApO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJwbGF5ZXJVcHBlcllcIiArIHBsYXllclVwcGVyWSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcInBsYXllcmxvd2VyeVwiICsgcGxheWVyTG93ZXJZKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwibGFkLnlcIiArIGxhZC55KTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwibGFkLnlcIiArIGxhZC55KzE1MCk7XG4gICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgIGlmIChcbiAgICAgICAgcGxheWVyQ2VudGVyID49IGxhZC54ICYmXG4gICAgICAgIHBsYXllckNlbnRlciA8PSBsYWQueCArIDQwICYmXG4gICAgICAgIHBsYXllclVwcGVyWSA+PSBsYWQueSAmJlxuICAgICAgICBwbGF5ZXJMb3dlclkgPj0gbGFkLnkgICYmXG4gICAgICAgIHBsYXllckxvd2VyWSA8PSBsYWQueSArIDE2MFxuICAgICAgKSB7XG4gICAgICAgIC8vIGRlYnVnZ2VyO1xuICAgICAgICAvLyB0aGlzLmlzQ2xpbWJpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gbGFkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgICAvLyByZXR1cm4gdGhpcy5pc0NsaW1iaW5nID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG4gIHN0YW5kKHNpZGUpIHtcbiAgICB0aGlzLnNwcml0ZS5pbWFnZSA9XG4gICAgICBzaWRlID09PSBcImxlZnRcIiA/IHRoaXMuc3RhbmRpbmdJbWcgOiB0aGlzLnN0YW5kaW5nSW1nUmlnaHQ7XG4gICAgdGhpcy5zcHJpdGUud2lkdGggPSAyNDA7XG4gICAgdGhpcy5zcHJpdGUuc3RhbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMuc3ByaXRlLmZyYW1lSW5kZXggPSAwO1xuICAgIHRoaXMuc3ByaXRlLm51bWJlck9mRnJhbWVzID0gNDtcbiAgfVxuXG4gIC8vIG1vdmVVcChlKSB7XG4gIC8vICAgLy8gdGhpcy5sYWRkZXJzID0gdGhpcy5tYXAuZGlzcGxheWVkTGFkZGVycygpO1xuICAvLyAgIC8vIGNvbnNvbGUubG9nKHRoaXMubGFkZGVycyk7XG4gIC8vIH1cblxuICBtb3ZlRG93bihlKSB7fVxuXG4gIGp1bXAoZSkge1xuICAgIGlmICh0aGlzLmp1bXBQcmVzcyAmJiAhdGhpcy5pc0p1bXBpbmcpIHtcbiAgICAgIHRoaXMuaXNKdW1waW5nID0gdHJ1ZTtcblxuICAgICAgbGV0IGluaXRpYWxZID0gdGhpcy5zcHJpdGUuZHk7XG4gICAgICBsZXQgdmVsWDtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmlnaHRQcmVzcyk7XG4gICAgICBpZiAodGhpcy5yaWdodFByZXNzKSB7XG4gICAgICAgIHZlbFggPSAyO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmxlZnRQcmVzcykge1xuICAgICAgICB2ZWxYID0gLTI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZWxYID0gMDtcbiAgICAgIH1cbiAgICAgIGxldCB2ZWxZID0gLTEyO1xuICAgICAgbGV0IGdyYXZpdHkgPSAwLjk7XG4gICAgICBsZXQganVtcGluZyA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdmVsWSArPSBncmF2aXR5O1xuICAgICAgICB0aGlzLnNwcml0ZS5keSArPSB2ZWxZO1xuICAgICAgICBpZiAodGhpcy5zcHJpdGUuZHggPCAwIHx8IHRoaXMuc3ByaXRlLmR4ID4gdGhpcy5jYW52YXNXaWR0aCAtIDYwKSB7XG4gICAgICAgICAgdGhpcy5zcHJpdGUuZHggKz0gLXZlbFg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zcHJpdGUuZHggKz0gdmVsWDtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLnNwcml0ZS5keCArPSB2ZWxYO1xuICAgICAgICBpZiAodGhpcy5zcHJpdGUuZHkgPiBpbml0aWFsWSkge1xuICAgICAgICAgIHZlbFkgPSAwO1xuICAgICAgICAgIHRoaXMuc3ByaXRlLmR5ID0gaW5pdGlhbFk7XG4gICAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICBjbGVhckludGVydmFsKGp1bXBpbmcpO1xuICAgICAgICB9XG4gICAgICB9LCAxMCk7XG4gICAgfVxuICB9XG4gIC8vIGxldCBqdW1waW5nID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAvLyAgIGlmICghdGhpcy5nb0Rvd24gJiYgdGhpcy5zcHJpdGUuZHkgPiBpbml0aWFsWSAtIHRoaXMuanVtcExpbWl0KSB7XG4gIC8vICAgICBpZiAodGhpcy5zcHJpdGUuZHggPCAwIHx8IHRoaXMuc3ByaXRlLmR4ID4gdGhpcy5jYW52YXNXaWR0aCAtIDYwKSB7XG4gIC8vICAgICAgIHRoaXMuc3ByaXRlLmR4ICs9IC12ZWxYO1xuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgdGhpcy5zcHJpdGUuZHggKz0gdmVsWDtcbiAgLy8gICAgIH1cbiAgLy8gICAgIHRoaXMuc3ByaXRlLmR5IC09IDQ7XG4gIC8vICAgfSBlbHNlIGlmICh0aGlzLnNwcml0ZS5keSA8IGluaXRpYWxZKSB7XG4gIC8vICAgICB0aGlzLmdvRG93biA9IHRydWU7XG4gIC8vICAgICBpZiAodGhpcy5zcHJpdGUuZHggPCAwIHx8IHRoaXMuc3ByaXRlLmR4ID4gdGhpcy5jYW52YXNXaWR0aCAtIDYwKSB7XG4gIC8vICAgICAgIHRoaXMuc3ByaXRlLmR4ICs9IC12ZWxYO1xuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgdGhpcy5zcHJpdGUuZHggKz0gdmVsWDtcbiAgLy8gICAgIH1cbiAgLy8gICAgIHRoaXMuc3ByaXRlLmR5ICs9IDQ7XG4gIC8vICAgfSBlbHNlIHtcbiAgLy8gICAgIHRoaXMuaXNKdW1waW5nID0gZmFsc2U7XG4gIC8vICAgICBjbGVhckludGVydmFsKGp1bXBpbmcpO1xuICAvLyAgICAgdGhpcy5nb0Rvd24gPSBmYWxzZTtcbiAgLy8gICB9XG4gIC8vIH0sIDMzKTtcbiAgLy8gbW92ZUxlZnQoKSB7XG4gIC8vICAgaWYgKCF0aGlzLmxlZnRQcmVzcykge1xuICAvLyAgICAgdGhpcy5zdGFuZChcImxlZnRcIik7XG4gIC8vICAgfSBlbHNlIGlmICh0aGlzLmxlZnRQcmVzcyAmJiB0aGlzLnNwcml0ZS5keCA+IDApIHtcbiAgLy8gICAgIHRoaXMuc3ByaXRlLmR4IC09IDc7XG4gIC8vICAgICB0aGlzLnNwcml0ZS5pbWFnZSA9IHRoaXMud2Fsa2luZ0xlZnRJbWc7XG4gIC8vICAgICB0aGlzLnNwcml0ZS53aWR0aCA9IDYwMDtcbiAgLy8gICAgIHRoaXMuc3ByaXRlLm51bWJlck9mRnJhbWVzID0gMTA7XG4gIC8vICAgICB0aGlzLnNwcml0ZS5zdGFuZGluZyA9IGZhbHNlO1xuICAvLyAgIH1cbiAgLy8gfVxuICAvLyBtb3ZlUmlnaHQoKSB7XG4gIC8vICAgLy8gbGV0IHJpZ2h0O1xuICAvLyAgIC8vIHJpZ2h0ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAvLyAgIC8vICAgaWYodGhpcy5rZXlzLkFycm93UmlnaHQgJiYgIXRoaXMucmlnaHRQcmVzcyl7XG4gIC8vICAgLy8gICAgIHRoaXMucmlnaHRQcmVzcyA9IHRydWU7XG4gIC8vICAgLy8gICAgIGlmICh0aGlzLnNwcml0ZS5keCA8IHRoaXMuY2FudmFzV2lkdGggLSA2MCkge1xuICAvLyAgIC8vICAgICAgIHRoaXMuc3ByaXRlLmR4ICs9IDc7XG4gIC8vICAgLy8gICAgICAgdGhpcy5zcHJpdGUuaW1hZ2UgPSB0aGlzLndhbGtpbmdSaWdodEltZztcbiAgLy8gICAvLyAgICAgICB0aGlzLnNwcml0ZS53aWR0aCA9IDYwMDtcbiAgLy8gICAvLyAgICAgICB0aGlzLnNwcml0ZS5udW1iZXJPZkZyYW1lcyA9IDEwO1xuICAvLyAgIC8vICAgICAgIHRoaXMuc3ByaXRlLnN0YW5kaW5nID0gZmFsc2U7XG4gIC8vICAgLy8gICAgIH1cbiAgLy8gICAvLyAgIH1lbHNle1xuICAvLyAgIC8vICAgICB0aGlzLnJpZ2h0UHJlc3MgPSBmYWxzZTtcbiAgLy8gICAvLyAgICAgY2xlYXJJbnRlcnZhbChyaWdodCk7XG4gIC8vICAgLy8gICB9XG4gIC8vICAgLy8gICB9LDEwKTtcbiAgLy8gICBpZiAoIXRoaXMucmlnaHRQcmVzcykge1xuICAvLyAgICAgdGhpcy5zdGFuZChcInJpZ2h0XCIpO1xuICAvLyAgIH0gZWxzZSBpZiAodGhpcy5yaWdodFByZXNzICYmIHRoaXMuc3ByaXRlLmR4IDwgdGhpcy5jYW52YXNXaWR0aCAtIDYwKSB7XG4gIC8vICAgICB0aGlzLnNwcml0ZS5keCArPSA3O1xuICAvLyAgICAgdGhpcy5zcHJpdGUuaW1hZ2UgPSB0aGlzLndhbGtpbmdSaWdodEltZztcbiAgLy8gICAgIHRoaXMuc3ByaXRlLndpZHRoID0gNjAwO1xuICAvLyAgICAgdGhpcy5zcHJpdGUubnVtYmVyT2ZGcmFtZXMgPSAxMDtcbiAgLy8gICAgIHRoaXMuc3ByaXRlLnN0YW5kaW5nID0gZmFsc2U7XG4gIC8vICAgfVxuICAvLyB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/player.js\n");

/***/ }),

/***/ "./src/js/sprite.js":
/*!**************************!*\
  !*** ./src/js/sprite.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction sprite(options) {\n  let that = {};\n  that.frameIndex = options.frameIndex || 0;\n  let tickCount = 0;\n  let ticksPerFrame = options.ticksPerFrame || 0;\n  let step = 1;\n \n  that.canvasWidth = options.canvasWidth;\n  that.canvasHeight = options.canvasHeight;\n  that.context = options.context;\n  that.width = options.width;\n  that.height = options.height;\n  that.image = options.image;\n  // that.sx = options.sx || 0;\n  // that.sy = options.sy || 0;\n  that.dx = options.dx || 0;\n  that.dy = options.dy || 0;\n  that.numberOfFrames = options.numberOfFrames || 1;\n  that.standing = options.standing;\n\n  that.render = () => {\n    // that.image.onload = () => {\n    that.context.drawImage(\n      that.image,\n      // Sprite sheet\n      that.frameIndex * (that.width / that.numberOfFrames),\n      0,\n      //Single sprite\n      that.width / that.numberOfFrames,\n      that.height,\n      //Canvas position\n      that.dx,\n      that.dy,\n      //Sprite size on canvas\n      that.width / that.numberOfFrames,\n      that.height\n    );\n    // };\n  };\n\n  that.update = () => {\n    // debugger\n    tickCount += 1;\n\n    if (tickCount > ticksPerFrame) {\n\n      tickCount = 0;\n      if(that.standing){\n        that.frameIndex += step;\n        if (that.frameIndex === that.numberOfFrames - 1 || that.frameIndex === 0) {\n          step = -step;\n        }\n      }else{\n        step = 1;\n        if(that.frameIndex < that.numberOfFrames - 1){\n          that.frameIndex += 1;\n        }else{\n          that.frameIndex = 0;\n        }\n\n      }\n    }\n  };\n\n  that.loop = () => {\n    that.render();\n    that.update();\n    // requestAnimationFrame(that.loop);\n  };\n\n  return that;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (sprite);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvc3ByaXRlLmpzPzliMzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNlLHFFQUFNLEVBQUMiLCJmaWxlIjoiLi9zcmMvanMvc3ByaXRlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc3ByaXRlKG9wdGlvbnMpIHtcbiAgbGV0IHRoYXQgPSB7fTtcbiAgdGhhdC5mcmFtZUluZGV4ID0gb3B0aW9ucy5mcmFtZUluZGV4IHx8IDA7XG4gIGxldCB0aWNrQ291bnQgPSAwO1xuICBsZXQgdGlja3NQZXJGcmFtZSA9IG9wdGlvbnMudGlja3NQZXJGcmFtZSB8fCAwO1xuICBsZXQgc3RlcCA9IDE7XG4gXG4gIHRoYXQuY2FudmFzV2lkdGggPSBvcHRpb25zLmNhbnZhc1dpZHRoO1xuICB0aGF0LmNhbnZhc0hlaWdodCA9IG9wdGlvbnMuY2FudmFzSGVpZ2h0O1xuICB0aGF0LmNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQ7XG4gIHRoYXQud2lkdGggPSBvcHRpb25zLndpZHRoO1xuICB0aGF0LmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuICB0aGF0LmltYWdlID0gb3B0aW9ucy5pbWFnZTtcbiAgLy8gdGhhdC5zeCA9IG9wdGlvbnMuc3ggfHwgMDtcbiAgLy8gdGhhdC5zeSA9IG9wdGlvbnMuc3kgfHwgMDtcbiAgdGhhdC5keCA9IG9wdGlvbnMuZHggfHwgMDtcbiAgdGhhdC5keSA9IG9wdGlvbnMuZHkgfHwgMDtcbiAgdGhhdC5udW1iZXJPZkZyYW1lcyA9IG9wdGlvbnMubnVtYmVyT2ZGcmFtZXMgfHwgMTtcbiAgdGhhdC5zdGFuZGluZyA9IG9wdGlvbnMuc3RhbmRpbmc7XG5cbiAgdGhhdC5yZW5kZXIgPSAoKSA9PiB7XG4gICAgLy8gdGhhdC5pbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgdGhhdC5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgIHRoYXQuaW1hZ2UsXG4gICAgICAvLyBTcHJpdGUgc2hlZXRcbiAgICAgIHRoYXQuZnJhbWVJbmRleCAqICh0aGF0LndpZHRoIC8gdGhhdC5udW1iZXJPZkZyYW1lcyksXG4gICAgICAwLFxuICAgICAgLy9TaW5nbGUgc3ByaXRlXG4gICAgICB0aGF0LndpZHRoIC8gdGhhdC5udW1iZXJPZkZyYW1lcyxcbiAgICAgIHRoYXQuaGVpZ2h0LFxuICAgICAgLy9DYW52YXMgcG9zaXRpb25cbiAgICAgIHRoYXQuZHgsXG4gICAgICB0aGF0LmR5LFxuICAgICAgLy9TcHJpdGUgc2l6ZSBvbiBjYW52YXNcbiAgICAgIHRoYXQud2lkdGggLyB0aGF0Lm51bWJlck9mRnJhbWVzLFxuICAgICAgdGhhdC5oZWlnaHRcbiAgICApO1xuICAgIC8vIH07XG4gIH07XG5cbiAgdGhhdC51cGRhdGUgPSAoKSA9PiB7XG4gICAgLy8gZGVidWdnZXJcbiAgICB0aWNrQ291bnQgKz0gMTtcblxuICAgIGlmICh0aWNrQ291bnQgPiB0aWNrc1BlckZyYW1lKSB7XG5cbiAgICAgIHRpY2tDb3VudCA9IDA7XG4gICAgICBpZih0aGF0LnN0YW5kaW5nKXtcbiAgICAgICAgdGhhdC5mcmFtZUluZGV4ICs9IHN0ZXA7XG4gICAgICAgIGlmICh0aGF0LmZyYW1lSW5kZXggPT09IHRoYXQubnVtYmVyT2ZGcmFtZXMgLSAxIHx8IHRoYXQuZnJhbWVJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHN0ZXAgPSAtc3RlcDtcbiAgICAgICAgfVxuICAgICAgfWVsc2V7XG4gICAgICAgIHN0ZXAgPSAxO1xuICAgICAgICBpZih0aGF0LmZyYW1lSW5kZXggPCB0aGF0Lm51bWJlck9mRnJhbWVzIC0gMSl7XG4gICAgICAgICAgdGhhdC5mcmFtZUluZGV4ICs9IDE7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHRoYXQuZnJhbWVJbmRleCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB0aGF0Lmxvb3AgPSAoKSA9PiB7XG4gICAgdGhhdC5yZW5kZXIoKTtcbiAgICB0aGF0LnVwZGF0ZSgpO1xuICAgIC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGF0Lmxvb3ApO1xuICB9O1xuXG4gIHJldHVybiB0aGF0O1xufVxuZXhwb3J0IGRlZmF1bHQgc3ByaXRlO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/sprite.js\n");

/***/ })

/******/ });